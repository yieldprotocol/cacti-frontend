"use strict";(self.webpackChunkchatweb3_frontend=self.webpackChunkchatweb3_frontend||[]).push([[1986],{"./src/components/cactiComponents/ActionResponse.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Disabled:()=>Disabled,Error:()=>ActionResponse_stories_Error,Pending:()=>Pending,Primary:()=>Primary,Success:()=>Success,default:()=>ActionResponse_stories});var defineProperty=__webpack_require__("./node_modules/@storybook/nextjs/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),react_toastify_esm=__webpack_require__("./node_modules/react-toastify/dist/react-toastify.esm.mjs"),taggedTemplateLiteral=__webpack_require__("./node_modules/@storybook/nextjs/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"),react=__webpack_require__("./node_modules/react/index.js"),chunk_GEBDUYT7=__webpack_require__("./node_modules/@rainbow-me/rainbowkit/dist/chunk-GEBDUYT7.js"),tailwind_styled_components_esm=__webpack_require__("./node_modules/tailwind-styled-components/dist/tailwind-styled-components.esm.js"),dist=__webpack_require__("./node_modules/wagmi/dist/index.js"),asyncToGenerator=__webpack_require__("./node_modules/@storybook/nextjs/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),regenerator=__webpack_require__("./node_modules/@storybook/nextjs/node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),SettingsContext=__webpack_require__("./src/contexts/SettingsContext.tsx"),axios=__webpack_require__("./node_modules/axios/lib/axios.js"),json_rpc_provider=__webpack_require__("./node_modules/@ethersproject/providers/lib.esm/json-rpc-provider.js"),lib_esm=__webpack_require__("./node_modules/@ethersproject/bytes/lib.esm/index.js"),immutable_dist=__webpack_require__("./node_modules/swr/immutable/dist/index.mjs");const hooks_useForkTools=function useForkTools(id){var settings=(0,react.useContext)(SettingsContext.ZP).settings,isForkedEnv=settings.isForkedEnv,forkId=settings.forkId,forkUrl="https://rpc.tenderly.co/fork/".concat(id||forkId),account=(0,dist.mA)().address,refetch=(0,dist.KQ)({address:account}).refetch,provider=(0,dist.yL)(),forkProvider=(0,react.useMemo)((function(){return forkUrl?new json_rpc_provider.r(forkUrl):void 0}),[forkUrl]),forkSigner=isForkedEnv&&forkUrl?null==forkProvider?void 0:forkProvider.getSigner(account):void 0,createNewFork=(0,react.useCallback)((0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(){var forkAPI,currentBlockNumber,resp;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return forkAPI="http://api.tenderly.co/api/v1/account/".concat("Yield","/project/").concat("chatweb3","/fork"),_context.next=3,provider.getBlockNumber();case 3:return currentBlockNumber=_context.sent,_context.next=6,axios.Z.post(forkAPI,{network_id:1,block_number:currentBlockNumber},{headers:{"X-Access-Key":"tKosvsANtW4pI7YUzIACLNSfGr01I2Nr"}});case 6:return resp=_context.sent,_context.abrupt("return","https://rpc.tenderly.co/fork/".concat(resp.data.simulation_fork.id));case 8:case"end":return _context.stop()}}),_callee)}))),[provider]),getForkTimestamp=(0,react.useCallback)((0,asyncToGenerator.Z)(regenerator_default().mark((function _callee2(){var _yield$provider$getBl,timestamp;return regenerator_default().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(isForkedEnv&&provider){_context2.next=2;break}return _context2.abrupt("return");case 2:return _context2.prev=2,_context2.next=5,provider.getBlock("latest");case 5:return _yield$provider$getBl=_context2.sent,timestamp=_yield$provider$getBl.timestamp,console.log("Updated Forked Blockchain time: ",new Date(1e3*timestamp)),_context2.abrupt("return",timestamp);case 11:return _context2.prev=11,_context2.t0=_context2.catch(2),console.log("Error getting latest timestamp",_context2.t0),_context2.abrupt("return",void 0);case 15:case"end":return _context2.stop()}}),_callee2,null,[[2,11]])}))),[provider,isForkedEnv]),getForkStartBlock=(0,react.useCallback)((0,asyncToGenerator.Z)(regenerator_default().mark((function _callee3(){var num,sBlock;return regenerator_default().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(isForkedEnv&&provider){_context3.next=2;break}return _context3.abrupt("return","earliest");case 2:return _context3.prev=2,_context3.next=5,null==forkProvider?void 0:forkProvider.send("tenderly_getForkBlockNumber",[]);case 5:return num=_context3.sent,sBlock=+num.toString(),console.log("Fork start block: ",sBlock),_context3.abrupt("return",sBlock);case 11:return _context3.prev=11,_context3.t0=_context3.catch(2),console.log("Could not get tenderly start block: ",_context3.t0),_context3.abrupt("return","earliest");case 15:case"end":return _context3.stop()}}),_callee3,null,[[2,11]])}))),[isForkedEnv,provider,forkProvider]),fillEther=(0,react.useCallback)((0,asyncToGenerator.Z)(regenerator_default().mark((function _callee4(){var transactionParameters;return regenerator_default().wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(provider&&isForkedEnv){_context4.next=2;break}return _context4.abrupt("return");case 2:return _context4.prev=2,transactionParameters=[[account],lib_esm.hexValue(BigInt("100000000000000000000"))],_context4.next=6,null==forkProvider?void 0:forkProvider.send("tenderly_addBalance",transactionParameters);case 6:refetch(),console.log("Filled eth on fork"),_context4.next=13;break;case 10:_context4.prev=10,_context4.t0=_context4.catch(2),console.log("Could not fill eth on Tenderly fork");case 13:case"end":return _context4.stop()}}),_callee4,null,[[2,10]])}))),[provider,isForkedEnv,account,forkProvider,refetch]);return{forkTimestamp:(0,immutable_dist.Z)(isForkedEnv?["forkTimestamp",forkUrl]:null,getForkTimestamp).data,forkStartBlock:(0,immutable_dist.Z)(isForkedEnv?["forkStartBlock",forkUrl]:null,getForkStartBlock).data,createNewFork,fillEther,provider:forkProvider,signer:forkSigner}};const hooks_useSigner=function useSigner(){var isForkedEnv=(0,react.useContext)(SettingsContext.ZP).settings.isForkedEnv,wagmiSigner=(0,dist.mx)().data,forkSigner=hooks_useForkTools().signer;return isForkedEnv?forkSigner:wagmiSigner};const hooks_useSubmitTx=function useSubmitTx(request,onSuccess,onError){var signer=hooks_useSigner(),_useState=(0,react.useState)(),hash=_useState[0],setHash=_useState[1],_useState2=(0,react.useState)(!1),isPending=_useState2[0],setIsPending=_useState2[1],_useState3=(0,react.useState)(!1),isPrepared=_useState3[0],setIsPrepared=_useState3[1],_useState4=(0,react.useState)(),error=_useState4[0],setError=_useState4[1],prepare=(0,react.useCallback)((0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(){var gasLimit;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!1,gasLimit=null==request?void 0:request.gasLimit,request){_context.next=4;break}return _context.abrupt("return",{isPrepared:false,gasLimit});case 4:return _context.prev=4,_context.next=7,null==signer?void 0:signer.estimateGas(request);case 7:gasLimit=_context.sent,setIsPrepared(!0),_context.next=16;break;case 11:_context.prev=11,_context.t0=_context.catch(4),console.error("Error preparing",_context.t0),setError(_context.t0),setIsPrepared(!1);case 16:case"end":return _context.stop()}}),_callee,null,[[4,11]])}))),[request,signer]),submitTx=function(){var _ref2=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee2(){var tx;return regenerator_default().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(signer){_context2.next=2;break}throw new Error("No signer found");case 2:if(request){_context2.next=4;break}return _context2.abrupt("return",void 0);case 4:if(isPrepared){_context2.next=6;break}return _context2.abrupt("return",void 0);case 6:return setIsPending(!0),_context2.prev=7,_context2.next=10,signer.sendTransaction(request);case 10:tx=_context2.sent,setHash(tx.hash),setIsPending(!1),_context2.next=19;break;case 15:_context2.prev=15,_context2.t0=_context2.catch(7),setIsPending(!1),setError(_context2.t0);case 19:case"end":return _context2.stop()}}),_callee2,null,[[7,15]])})));return function submitTx(){return _ref2.apply(this,arguments)}}();(0,react.useEffect)((function(){(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee3(){return regenerator_default().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,prepare();case 2:case"end":return _context3.stop()}}),_callee3)})))()}),[prepare]);var _useWaitForTransactio=(0,dist.BX)({hash,onSuccess,onError}),isError=_useWaitForTransactio.isError,isLoading=_useWaitForTransactio.isLoading,isSuccess=_useWaitForTransactio.isSuccess;return{receipt:_useWaitForTransactio.data,hash,isLoading,isPendingConfirm:isPending,isSuccess,isError,submitTx,isPrepared,error}};var _templateObject,_stylingByState,_Primary$parameters,_Primary$parameters2,_Primary$parameters2$,_Disabled$parameters,_Disabled$parameters2,_Disabled$parameters3,_Pending$parameters,_Pending$parameters2,_Pending$parameters2$,_Error$parameters,_Error$parameters2,_Error$parameters2$do,_Success$parameters,_Success$parameters2,_Success$parameters2$,__jsx=react.createElement,ActionResponseState=function(ActionResponseState){return ActionResponseState.PENDING="pending",ActionResponseState.SUCCESS="success",ActionResponseState.ERROR="error",ActionResponseState.DISABLED="disabled",ActionResponseState.LOADING="loading",ActionResponseState.DEFAULT="default",ActionResponseState}({}),StyledButton=tailwind_styled_components_esm.Z.button(_templateObject||(_templateObject=(0,taggedTemplateLiteral.Z)(["\ninline-flex items-center justify-center\nheight-[40px] w-[215px] w-max-[256px]\npy-[8px] px-[24px]\nrounded-[8px]\nborder-[1px] border-white border-opacity-10\nbg-[#2E8C87]\ntext-sm text-white/90\n"]))),stylingByState=(_stylingByState={},(0,defineProperty.Z)(_stylingByState,ActionResponseState.PENDING,"cursor-not-allowed"),(0,defineProperty.Z)(_stylingByState,ActionResponseState.SUCCESS,"bg-green-800"),(0,defineProperty.Z)(_stylingByState,ActionResponseState.ERROR,"bg-red-800"),(0,defineProperty.Z)(_stylingByState,ActionResponseState.DISABLED,"bg-opacity-50 text-white text-opacity-50 cursor-not-allowed"),(0,defineProperty.Z)(_stylingByState,ActionResponseState.LOADING,"cursor-not-allowed"),(0,defineProperty.Z)(_stylingByState,ActionResponseState.DEFAULT,""),_stylingByState),ActionResponse=function ActionResponse(props){var address=(0,dist.mA)().address,styleClassName=stylingByState[props.state],config=(0,dist.PJ)(props.preparedContractWrite).config,_useSubmitTx=hooks_useSubmitTx(config.request);_useSubmitTx.isSuccess,_useSubmitTx.isError,_useSubmitTx.isLoading,_useSubmitTx.submitTx,_useSubmitTx.isPrepared,_useSubmitTx.error,_useSubmitTx.hash,_useSubmitTx.isPendingConfirm;return __jsx("div",{className:"flex w-full justify-center"},address?__jsx(StyledButton,{className:"bg-teal-900 ".concat(styleClassName),onClick:props.action},props.label):__jsx(chunk_GEBDUYT7.NL,null))};ActionResponse.displayName="ActionResponse",ActionResponse.__docgenInfo={description:"Action Response\nIncludes: Label, action, state, preparedContractWrite",methods:[],displayName:"ActionResponse"};try{ActionResponse.displayName="ActionResponse",ActionResponse.__docgenInfo={description:"Action Response\nIncludes: Label, action, state, preparedContractWrite",displayName:"ActionResponse",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/cactiComponents/ActionResponse.tsx#ActionResponse"]={docgenInfo:ActionResponse.__docgenInfo,name:"ActionResponse",path:"src/components/cactiComponents/ActionResponse.tsx#ActionResponse"})}catch(__react_docgen_typescript_loader_error){}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,defineProperty.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var defaultAction=function defaultAction(){(0,react_toastify_esm.Am)("Action")};const ActionResponse_stories={title:"cacti/ActionResponse",component:ActionResponse,tags:["autodocs"],argTypes:{action:{description:"The action to take.",default:defaultAction,control:"text"},label:{description:"Text to display on button",default:void 0,control:"text"},state:{description:"The state of the button",default:void 0,options:[ActionResponseState.DEFAULT,ActionResponseState.DISABLED,ActionResponseState.SUCCESS,ActionResponseState.ERROR,ActionResponseState.LOADING,ActionResponseState.PENDING],control:"select"}}};var Primary={args:{action:defaultAction,label:"Submit",state:ActionResponseState.DEFAULT},parameters:{design:{type:"figma",url:"https://www.figma.com/file/UraHvlIzwoXoOYjcIir9f7/Web3-GPT-UI-(Shared)?type=design&node-id=1-1280&t=GMNJHZirYHaTkOtp-4"}}},Disabled={args:{action:defaultAction,label:"Submit",state:ActionResponseState.DISABLED}},Pending={args:{action:defaultAction,label:"Submit",state:ActionResponseState.PENDING}},ActionResponse_stories_Error={args:{action:defaultAction,label:"Submit",state:ActionResponseState.ERROR}},Success={args:{action:defaultAction,label:"Submit",state:ActionResponseState.SUCCESS}};Primary.parameters=_objectSpread(_objectSpread({},Primary.parameters),{},{docs:_objectSpread(_objectSpread({},null===(_Primary$parameters=Primary.parameters)||void 0===_Primary$parameters?void 0:_Primary$parameters.docs),{},{source:_objectSpread({originalSource:"{\n  args: {\n    action: defaultAction,\n    label: 'Submit',\n    state: ActionResponseState.DEFAULT\n  }\n}"},null===(_Primary$parameters2=Primary.parameters)||void 0===_Primary$parameters2||null===(_Primary$parameters2$=_Primary$parameters2.docs)||void 0===_Primary$parameters2$?void 0:_Primary$parameters2$.source)})}),Disabled.parameters=_objectSpread(_objectSpread({},Disabled.parameters),{},{docs:_objectSpread(_objectSpread({},null===(_Disabled$parameters=Disabled.parameters)||void 0===_Disabled$parameters?void 0:_Disabled$parameters.docs),{},{source:_objectSpread({originalSource:"{\n  args: {\n    action: defaultAction,\n    label: 'Submit',\n    state: ActionResponseState.DISABLED\n  }\n}"},null===(_Disabled$parameters2=Disabled.parameters)||void 0===_Disabled$parameters2||null===(_Disabled$parameters3=_Disabled$parameters2.docs)||void 0===_Disabled$parameters3?void 0:_Disabled$parameters3.source)})}),Pending.parameters=_objectSpread(_objectSpread({},Pending.parameters),{},{docs:_objectSpread(_objectSpread({},null===(_Pending$parameters=Pending.parameters)||void 0===_Pending$parameters?void 0:_Pending$parameters.docs),{},{source:_objectSpread({originalSource:"{\n  args: {\n    action: defaultAction,\n    label: 'Submit',\n    state: ActionResponseState.PENDING\n  }\n}"},null===(_Pending$parameters2=Pending.parameters)||void 0===_Pending$parameters2||null===(_Pending$parameters2$=_Pending$parameters2.docs)||void 0===_Pending$parameters2$?void 0:_Pending$parameters2$.source)})}),ActionResponse_stories_Error.parameters=_objectSpread(_objectSpread({},ActionResponse_stories_Error.parameters),{},{docs:_objectSpread(_objectSpread({},null===(_Error$parameters=ActionResponse_stories_Error.parameters)||void 0===_Error$parameters?void 0:_Error$parameters.docs),{},{source:_objectSpread({originalSource:"{\n  args: {\n    action: defaultAction,\n    label: 'Submit',\n    state: ActionResponseState.ERROR\n  }\n}"},null===(_Error$parameters2=ActionResponse_stories_Error.parameters)||void 0===_Error$parameters2||null===(_Error$parameters2$do=_Error$parameters2.docs)||void 0===_Error$parameters2$do?void 0:_Error$parameters2$do.source)})}),Success.parameters=_objectSpread(_objectSpread({},Success.parameters),{},{docs:_objectSpread(_objectSpread({},null===(_Success$parameters=Success.parameters)||void 0===_Success$parameters?void 0:_Success$parameters.docs),{},{source:_objectSpread({originalSource:"{\n  args: {\n    action: defaultAction,\n    label: 'Submit',\n    state: ActionResponseState.SUCCESS\n  }\n}"},null===(_Success$parameters2=Success.parameters)||void 0===_Success$parameters2||null===(_Success$parameters2$=_Success$parameters2.docs)||void 0===_Success$parameters2$?void 0:_Success$parameters2$.source)})})}}]);